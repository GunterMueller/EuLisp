<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title><b>EuLisp</b></title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2010-03-28 22:33:04 BST"/>
<meta name="author" content="nil"/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color:lightblue; font-weight:normal }
  .target { }
  .timestamp { color: grey }
  .timestamp-kwd { color: CadetBlue }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*/-->
</script>
</head><body>
<h1 class="title"><b>EuLisp</b></h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Copyright </a></li>
<li><a href="#sec-2">2 Aim </a></li>
<li><a href="#sec-3">3 General Description </a></li>
<li><a href="#sec-4">4 Installation </a></li>
<li><a href="#sec-5">5 Getting Started </a></li>
<li><a href="#sec-6">6 Features </a></li>
<li><a href="#sec-7">7 Extras </a></li>
<li><a href="#sec-8">8 Documentation </a></li>
<li><a href="#sec-9">9 Recent Developments </a></li>
<li><a href="#sec-10">10 To Do </a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">1 <a href="./COPYING">Copyright</a> </h2>
<div id="text-1">

<p>Youtoo is free software; you can redistribute it and/or modify it under the
terms of the GNU General Public License as published by the Free Software
Foundation; either version 2 of the License, or (at your option) any later
version.  See the file COPYING in this directory, for a description of the GNU
General Public License terms under which you can copy the files.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">2 Aim </h2>
<div id="text-2">

<p>This version of the EuLisp definition and Youtoo implementation are being
developed in an attempt to reconcile the differences with the ultimate aim to
create a consistent definition and implementation which is as close to
EuLisp-1.0 as is possible to ascertain from the remaining documents related to
the standardisation process:
</p><ul>
<li id="sec-2.1">Youtoo original sources <br/>
This release of Youtoo started life as
<a href="http://www.cs.bath.ac.uk/~jap/EuLisp/youtoo/youtoo0.93.tar.gz">Youtoo-0.93</a>
developed by Andreas Kind, Julian Padget and others.  More details are
available from the original <a href="./README.orig">README</a> file and
<a href="http://www.cs.bath.ac.uk/~jap/ak1/youtoo/">the youtoo home page</a>.  The
<i>b2h</i> and <i>i2doc</i> tools needed to bootstrap youtoo were reverse engineered
and provided by
<a href="http://unwind-protect.org/~tkb/software.html#youtoo-and-eulisp-definition">T. Kurt Bond</a>.
</li>
<li id="sec-2.2">EuLisp definition original sources <br/>
The version of the EuLisp definition supplied is this release of Youtoo
started life as EuLisp-0.99 from the pack released by Julian Padget:
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/definition/931202.tar.gz">931202.tar.gz</a> updated following proposals and discussions also released by
Julian Padget:
<ul>
<li>
<a href="http://people.bath.ac.uk/masjap/EuLisp/">Online definition</a>
</li>
<li>
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/mail/nov93.gz">nov93.gz</a>
</li>
<li>
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/mail/dec93.gz">dec93.gz</a>
</li>
<li>
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/WG/adv-genarith.ps.gz">adv-genarith.ps.gz</a>
</li>
<li>
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/WG/eulisp-ffi.ps.gz">eulisp-ffi.ps.gz</a>
</li>
<li>
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/WG/eulisp-proposals.ps.gz">eulisp-proposals.ps.gz</a>
</li>
<li>
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/WG/genarith.ps.gz">genarith.ps.gz</a>
</li>
<li>
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/WG/map.ps.gz">map.ps.gz</a>
</li>
<li>
<a href="ftp://ftp.bath.ac.uk/pub/eulisp/WG/stream.ps.gz">stream.ps.gz</a>

</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">3 General Description </h2>
<div id="text-3">

<p>The youtoo system is a public domain implementation of the object-oriented
dynamic programming language EuLisp. EuLisp is a single-valued dialect of Lisp
with an integrated object system, a defined meta-object protocol, modules and
a simple light-weight process mechanism (threads).
</p>
<p>
The youtoo compiler/interpreter compiles EuLisp into C-embedded virtual
machine code which can be statically or dynamically linked with the virtual
machine, the conservative garbage collector, the EuLisp language library and
arbitrary other Lisp and foreign code (C, C++ and Fortran). Resulting
stand-alone executables are portable, interoperable and efficient (see The
Lisp Performance Page). The language implementation is extended towards a
Virtual Multicomputer Architecture. Object serialization and inter-process
communication (Sockets, MPI, Harvest Object Cache) support the migration of
arbitray data and code.
</p>
<p>
The system reuses ideas from the Oaklisp system written by Barak Perlmutter
and Kevin Lang. The meta-object protocol (<code>Telos</code>) was originally implemented
in Common Lisp by Russell Bradford. By default, a garbage collector written by
Hans Boehm and Alan Demers is used.
</p>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">4 Installation </h2>
<div id="text-4">

<ul>
<li>
Unpack version X with <br/>
<i>tar -xzf youtooX.tar.gz</i>
</li>
<li>
Run <br/>
<i>./configure</i> <br/>
and check the settings.  Edit the configure file to reflect your system if
necessary and re-run<br/>
<i>./configure</i>.
</li>
<li>
Run <br/>
<i>make</i> <br/>
If you want to use shared libraries (which we really recommend Linux,
FreeBSD, Solaris and IRIX), run <br/>
<i>make shared</i> <br/>
and add the directory <i>&hellip;/youtoo/Lib.${ARCH}</i> to the environment variable
<code>$LD_LIBRARY_PATH</code> (see <i>./makeso.Path</i>).
</li>
<li>
You should now be able to run the script <br/>
<i>Bin.${ARCH}/youtoo.sh</i> <br/>
(see next section).

</li>
</ul>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">5 Getting Started </h2>
<div id="text-5">

<ul>
<li>
Run <br/>
<i>Bin.${ARCH}/youtoo.sh</i> -help <br/>
to see the compiler options.
</li>
<li>
Run <br/>
<i>Bin.${ARCH}/youtoo.sh fact -l level1</i> <br/>
to compile module fact in (built-in) load directory Misc into a stand-alone
executable. With shared libraries the executable should be less the 40K.
</li>
<li>
Run <br/>
<i>Bin.${ARCH}/youtoo.sh</i> <br/>
without options to start the EuLisp interpreter. The read-eval-print loop
provides extra commands (type <i>help:</i>).

</li>
</ul>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6">6 Features </h2>
<div id="text-6">

<ul>
<li id="sec-6.1">~/.eulrc.${ARCH} <br/>
For private customisation, put a copy of <i>.eulrc.${ARCH}</i> in your home
directory.  For example, remove the optimisation flag of the C compiler.

</li>
<li id="sec-6.2">EuLisp Module Files <br/>
Have the extension <i>.em</i>.

<ul>
<li id="sec-6.2.1">EuLisp Language Level1 <br/>
Level1 is provided by the library <i>liblevel1.a</i>.
Standard macros are defined in the syntax module macros. Thus, the default
module body looks like this:
#+BEGIN_SRC lisp
(defmodule foo
(syntax (macros)
import (level1))

<p>
&hellip;
</p>
<p>
)  ;; end of module
#+END_SRC
</p>
</li>
</ul>
</li>
<li id="sec-6.3">Pretty Printing <br/>
The function pprint provides generic pretty printing.

</li>
<li id="sec-6.4">Main <br/>
There is no main entry function Top-level forms in modules are executed with
with respect to the module hierarchy. Global variables <code>*argc*</code> and <code>*argv*</code>
are provided.

</li>
<li id="sec-6.5">Standard Bindings <br/>
See <i>Doc/bindings.txt</i> for a list of standard bindings.

</li>
<li id="sec-6.6">Module Compilation <br/>
The compiler checks before compiling a module which (directly and
indirectly) imported modules really need to be (re)compiled. This feature
can be switched off with <code>-no_recompile</code>.

</li>
<li id="sec-6.7">Standard C foreign-functions <br/>
in <i>Vm/eulisp.h</i>

<ul>
<li id="sec-6.7.1">Data conversion from EuLisp to C: <br/>
#+BEGIN_SRC c
int     eul_int_as_c_int(LispRef x);
int     eul_bool_as_c_bool(LispRef x);
double  eul_double_as_c_double(LispRef x);
LispRef eul_int_as_dbl(LispRef x);
char    eul_char_as_c_char(LispRef x);
char    *eul_string_as_c_string(LispRef x);
char    *eul_symbol_as_c_string(LispRef x);
#+END_SRC

</li>
<li id="sec-6.7.2">Data conversion from C to EuLisp: <br/>
#+BEGIN_SRC c
LispRef c_int_as_eul_int(int x);
LispRef c_bool_as_eul_bool(bool x)
LispRef c_char_as_eul_char(char x);
#+END_SRC

</li>
<li id="sec-6.7.3">Creating symbols and keywords: <br/>
#+BEGIN_SRC c
eul_intern_symbol(LispRef loc, char *str);
eul_intern_keyword(LispRef loc, char *str);
#+END_SRC

</li>
<li id="sec-6.7.4">EuLisp data allocation: <br/>
#+BEGIN_SRC c
eul_allocate_int(LispRef loc, int x);
eul_allocate_double(LispRef loc, double x);
eul_allocate_char(LispRef loc, char x);
eul_allocate_string(LispRef loc, char *str);
eul_allocate_cons(LispRef loc, LispRef x, LispRef y);
eul_allocate_vector(LispRef loc,int n, LispRef init);
eul_allocate_object(LispRef loc, LispRef class, LispRef n, LispRef init);
#+END_SRC

</li>
<li id="sec-6.7.5">EuLisp constants: <br/>
#+BEGIN_SRC c
LispRef eul_nil;
LispRef eul_t;
#+END_SRC

</li>
<li id="sec-6.7.6">EuLisp data access: <br/>
#+BEGIN_SRC c
LispRef eul_car(LispRef x);
LispRef eul_cdr(LispRef x);
LispRef eul_slot_ref(LispRef x, int i);
LispRef eul_symbol_name(LispRef x);
LispRef eul_keyword_name(LispRef x);
LispRef eul_class_of(LispRef x);
LispRef eul_size_of(LispRef x);
LispRef eul_string_size(LispRef x);
#+END_SRC

</li>
<li id="sec-6.7.7">EuLisp data predicates: <br/>
#+BEGIN_SRC c
int eul_null(LispRef x);
int eul_is_symbol(LispRef x);
int eul_is_keyword(LispRef x);
int eul_is_int(LispRef x);
int eul_is_double(LispRef x);
int eul_is_char(LispRef x);
int eul_is_string(LispRef x);
int eul_is_cons(LispRef x);
int eul_is_list(LispRef x);
int eul_is_gf(LispRef x);
int eul_is_lambda(LispRef x);
int eul_is_operator(LispRef x);
#+END_SRC

</li>
</ul>
</li>
<li id="sec-6.8">Using the foreign-function interface <br/>
Uses automatic converters. Here is an example how atoi can be used from
Lisp:
#+BEGIN_SRC lisp
(defextern atoi () )
#+END_SRC
If the desired external function foo is in library libbar.a and should be
called baz in Lisp the following defining form is necessary:
#+BEGIN_SRC lisp
(defextern baz (&hellip;) &hellip; "foo")
#+END_SRC
To link the library <i>libbar.a</i>, put a copy of <i>.eulrc.${ARCH}</i> in your
home directory and add -lbar to the list of <code>$CLIBS</code>; the library path must
be given with <code>-L&lt;bar-path&gt;</code> in the list of <code>$CFLAGS</code>.

<ul>
<li id="sec-6.8.1">Automatic type conversion <br/>
The following automatic converters are available:
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<col align="left"></col><col align="left"></col>
<thead>
<tr><th>Lisp</th><th>C (C99)</th></tr>
</thead>
<tbody>
<tr><td><code>&lt;int&gt;</code></td><td><code>int</code></td></tr>
<tr><td><code>&lt;character&gt;</code></td><td><code>char</code></td></tr>
<tr><td><code>&lt;double&gt;</code></td><td><code>double</code></td></tr>
<tr><td><code>&lt;string&gt;</code></td><td><code>char*</code></td></tr>
<tr><td><code>boolean</code></td><td><code>bool</code></td></tr>
<tr><td><code>ptr</code></td><td><code>void*</code></td></tr>
<tr><td><code>&lt;int*&gt;</code></td><td><code>int*</code></td></tr>
<tr><td><code>&lt;double*&gt;</code></td><td><code>double*</code></td></tr>
<tr><td><code>&lt;string*&gt;</code></td><td><code>char**</code></td></tr>
</tbody>
</table>


<p>
The <code>ptr</code> converter can be used to pass arbitrary C99 structures to Lisp,
so that they can be passed back to C at a later stage. The ptr converter
is also useful to pass a Lisp object unconverted to C99.
</p></li>
<li id="sec-6.8.2"><code>defextern</code> <br/>
<code>defextern</code> definitions can not be linked dynamically.
</li>
<li id="sec-6.8.3"><code>DEFINTERN</code> <br/>
Foreign in-calls have to use the DEFINTERN() macro. Examples for
in/out-calls to/from Lisp can be found in the directories <i>Examples/Misc</i>,
<i>Examples/Fortran</i>, and <i>Examples/C++</i>.

</li>
</ul>
</li>
<li id="sec-6.9">Macro expansion <br/>
is un-hygienic.

</li>
<li id="sec-6.10">EuLisp Scripts <br/>
Use <i>#!</i>../youtoo -script/ to write EuLisp scripts (see
<i>Examples/Misc/script.em</i>).

</li>
<li id="sec-6.11">Inter-operation with other languages <br/>
The examples in directory C++ and Fortran show how to interoperate with
these languages.

</li>
<li id="sec-6.12">List operators <br/>
Arithmetic functions <code>+</code>, <code>-</code> and <code>/</code> operate as set union, difference and
intersection on lists.

</li>
<li id="sec-6.13">Examples <br/>
Directory <i>Examples</i> contains modules for explanation and reuse.

</li>
</ul>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7">7 Extras </h2>
<div id="text-7">

<ul>
<li id="sec-7.1"><a href="Extras/Bignum/README.html">GNU Bignum</a>: <i>Extras/Bignum</i> <br/>
Danius Michaelides wrote a port to the GNU bignum library (gmp).
</li>
<li id="sec-7.2"><a href="Extras/MPI/README.html">MPI</a>: <i>Extras/MPI</i> <br/>

</li>
<li id="sec-7.3"><a href="Extras/TclTk/README.html">Tcl/Tk</a>: <i>Extras/TclTk</i> <br/>

</li>
<li id="sec-7.4"><a href="Extras/Fthread/README.html">Foreign thread libraries</a>: <i>Extras/Fthread</i> <br/>

</li>
<li id="sec-7.5"><a href="Extras/Scheme/README.html">Scheme</a>: <i>Extras/Scheme</i> <br/>
Modules <i>./Extras/Scheme/scheme0.em</i> and <i>./Extras/Scheme/scheme.em</i>
provide support for writing Scheme programs with youtoo.

</li>
<li id="sec-7.6"><a href="Extras/Matching/README.html">Matching</a>: <i>Extras/Match</i> <br/>
Modulized version of match-slib.scm badly hacked for EuLisp.

</li>
<li id="sec-7.7"><a href="Extras/OS/README.html">Object serialisation</a>: <i>Extras/OS</i> <br/>
Julian Padget\    includes support for closures and threads.

</li>
<li id="sec-7.8"><a href="Extras/OPS5/README.html">OPS5 rule-based system</a> : <i>Extras/OPS5</i> <br/>
An object-oriented version of the OPS5 rule-based system.

</li>
<li id="sec-7.9"><a href="Extras/Pipe/README.html">Pipes and forked child processes</a>:  <i>Extras/Pipe</i> <br/>
Thanks to Rob Simmons there is support for pipes to forked child
processes.

</li>
</ul>
</div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8">8 Documentation </h2>
<div id="text-8">

<ul>
<li id="sec-8.1">EuLisp definition <br/>
is provided in both HTML and PDF formats:
<ul>
<li>
<a href="Doc/EuLisp-0.991/html/eulisp.html">EuLisp Definition Version 0.991 (HTML)</a>
</li>
<li>
<a href="Doc/EuLisp-0.991/eulisp.pdf">EuLisp Definition Version 0.991 (PDF)</a>
</li>
</ul>
</li>
<li id="sec-8.2">EuLisp-1.0 Proposals <br/>
are in the folowing
<a href="Doc/EuLisp-0.991/Proposals/Proposals.txt">proposal document</a> and
discussed in the minutes of the
<a href="Doc/EuLisp-0.991/Proposals/Meeting_19_11_93.txt">meeting on 19/11/93</a> and in the
<a href="Doc/EuLisp-0.991/Proposals/nov93.txt">preceding</a> and
<a href="Doc/EuLisp-0.991/Proposals/dec93.txt">subsequent</a> Email correspondence.
The following reports are discussed in the above:
<ul>
<li>
<a href="Doc/EuLisp-0.991/Proposals/Reports/eulisp-proposals.ps">eulisp-proposals.ps</a>
</li>
<li>
<a href="Doc/EuLisp-0.991/Proposals/Reports/genarith.ps">genarith.ps</a>
</li>
<li>
<a href="Doc/EuLisp-0.991/Proposals/Reports/adv-genarith.ps">adv-genarith.ps</a>
</li>
<li>
<a href="Doc/EuLisp-0.991/Proposals/Reports/eulisp-ffi.ps">eulisp-ffi.ps</a>
</li>
</ul>
</li>
<li id="sec-8.3">Bindings <br/>
The current set of supported bindings in Youtoo are in the file
<a href="Doc/bindings.txt">bindings.txt</a>

</li>
</ul>
</div>

</div>

<div id="outline-container-9" class="outline-2">
<h2 id="sec-9">9 Recent Developments </h2>
<div id="text-9">

<ul>
<li id="sec-9.1">Support for 64bit Operation <br/>
The main change to support 64bit pointers is that on such architectures the
<code>Instruction</code> is a 16bit integer rather than an 8bit <code>char</code> so that 4
<code>Instructions</code> still fit exactly in a pointer.  This allows most of the
stack pointer incrementing to remain unchanged.  However, a very large
number of small changes were also necessary.  The C-files are compatible
between the 32bit and 64bit versions.

</li>
<li id="sec-9.2">C99 Compliance <br/>
The code is now C99 compliant and uses C99 data types and constructs so a
C99 compiler is required e.g. <code>gcc-4.?.?</code>.

</li>
<li id="sec-9.3">Rationalisation of the Makefiles <br/>
The <code>Makefiles</code> have been rationalised and simplified by using many features
in the GNU version of <code>make</code>, <code>gmake</code> which is now required to build
<code>youtoo</code>.

</li>
<li id="sec-9.4">The start of the EuLisp-1.0 compliance process <br/>
Many small changes to improve consistency between the Youtoo implementation
and the EuLisp-0.99 definition and the documents relating to the creation of
EuLisp-1.0.

</li>
</ul>
</div>

</div>

<div id="outline-container-10" class="outline-2">
<h2 id="sec-10">10 <a href="./TODO.html">To Do</a> </h2>
<div id="text-10">

</div>
</div>
<div id="postamble"><p class="date"> Date: 2010-03-28 22:33:04 BST</p>
<p>HTML generated by org-mode 6.21b in emacs 23</p>
</div></body>
</html>
